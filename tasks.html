<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,viewport-fit=cover" />
  <title>任务</title>

  <link rel="stylesheet" href="./css/app.css?v=3" />
  <link rel="stylesheet" href="./css/nav.css?v=5" />
  <link rel="stylesheet" href="./css/dashboard.css?v=3" />
  <link rel="stylesheet" href="./css/tasks.css?v=4" />
</head>

<body>
  <main class="app page">
    <header class="topbar">
      <div class="brand">
        <div class="logoDots" aria-hidden="true">
          <span class="d r"></span><span class="d b"></span><span class="d y"></span><span class="d g"></span>
        </div>
        <div class="brandText">
          <div class="brandName" data-i18n-zh="任务中心" data-i18n-en="Task Center">任务中心</div>
          <div class="brandSub" data-i18n-zh="分配任务 · 做单返利" data-i18n-en="Assign tasks · Earn rewards">分配任务 · 做单返利</div>
        </div>
      </div>

      <div class="topActions">
        <button class="iconbtn" id="langBtn" data-i18n-title-zh="切换语言" data-i18n-title-en="Toggle language" type="button">EN</button>
      </div>
    </header>

    <!-- 顶部状态卡 -->
    <section class="card panel">
      <div class="cardHead">
        <div>
          <div class="cardTitle" data-i18n-zh="任务概览" data-i18n-en="Task overview">任务概览</div>
          <div class="cardSub" data-i18n-zh="一次只能进行一个任务，完成后才能继续接单" data-i18n-en="You can process one task at a time; finish it before matching a new one">一次只能进行一个任务，完成后才能继续接单</div>
        </div>
      </div>

      <div class="cardBody">
        <div class="tTopGrid">
          <div class="tBox">
            <div class="tK" data-i18n-zh="可用余额" data-i18n-en="Available balance">可用余额</div>
            <div class="tV blue"><span id="balLine">0.0000</span> USDT</div>
          </div>
          <div class="tBox">
            <div class="tK" data-i18n-zh="进行中" data-i18n-en="In progress">进行中</div>
            <div class="tV"><span id="doingLine">0</span>/<span id="totalLine">55</span></div>
          </div>
          <div class="tBox">
            <div class="tK" data-i18n-zh="今日收益" data-i18n-en="Today’s profit">今日收益</div>
            <div class="tV"><span id="todayLine">0.0000</span> USDT</div>
          </div>
        </div>

        <div class="tRow">
          <div class="tSelectWrap">
            <div class="tK2" data-i18n-zh="订单数量" data-i18n-en="Order count">订单数量</div>
            <select class="tSelect" id="countSel">
              <option value="5" data-i18n-zh="5 单" data-i18n-en="5 orders">5 单</option>
              <option value="20" selected data-i18n-zh="20 单" data-i18n-en="20 orders">20 单</option>
            </select>
          </div>

          <button class="primaryBtn tBtnBig" id="matchBtn" type="button" data-i18n-zh="分配任务" data-i18n-en="Match tasks">分配任务</button>
        </div>

        <div class="tHint" id="hintLine"></div>
      </div>
    </section>

    <!-- 当前任务卡 -->
    <section class="card panel">
      <div class="cardHead">
        <div>
          <div class="cardTitle" data-i18n-zh="当前任务" data-i18n-en="Current task">当前任务</div>
          <div class="cardSub" data-i18n-zh="有进行中的任务时，点击进入做单" data-i18n-en="Enter the task when one is in progress">有进行中的任务时，点击进入做单</div>
        </div>
      </div>
      <div class="cardBody">
        <div id="currentBox"></div>
        <div class="empty" id="currentEmpty" style="display:none;" data-i18n-zh="暂无进行中的任务" data-i18n-en="No task in progress">暂无进行中的任务</div>
      </div>
    </section>

    <!-- 匹配中遮罩 -->
    <div class="matching" id="matching" style="display:none;">
      <div class="mCard">
        <div class="spinner"></div>
        <div class="mTitle" data-i18n-zh="正在为您匹配任务" data-i18n-en="Matching tasks for you">正在为您匹配任务</div>
        <div class="mSub" data-i18n-zh="请稍候，系统正在分配订单…" data-i18n-en="Please wait while we assign your orders">请稍候，系统正在分配订单…</div>
      </div>
    </div>

    <!-- 匹配完成弹窗 -->
    <div class="matching done" id="matchDone" style="display:none;">
      <div class="mCard successCard">
        <div class="successBadge" aria-hidden="true">✨</div>
        <div class="mTitle" id="doneTitle" data-i18n-zh="任务已分配" data-i18n-en="Task matched">任务已分配</div>
        <div class="mSub" id="doneSub" data-i18n-zh="请确认任务信息并开始执行" data-i18n-en="Review details before you start">请确认任务信息并开始执行</div>
        <div class="doneInfo">
          <div class="doneRow">
            <span data-i18n-zh="返利比例" data-i18n-en="Rebate">返利比例</span>
            <strong id="doneRate">5%</strong>
          </div>
          <div class="doneRow">
            <span data-i18n-zh="订单数量" data-i18n-en="Orders">订单数量</span>
            <strong id="doneCount">20 单</strong>
          </div>
          <div class="doneRow">
            <span data-i18n-zh="任务编号" data-i18n-en="Task ID">任务编号</span>
            <strong id="doneCode">-</strong>
          </div>
        </div>
        <div class="btnRow">
          <button class="ghostBtn" id="laterBtn" type="button" data-i18n-zh="稍后再做" data-i18n-en="Do later">稍后再做</button>
          <button class="primaryBtn" id="goDoBtnDone" type="button" data-i18n-zh="立即去做" data-i18n-en="Start now">立即去做</button>
        </div>
      </div>
    </div>
  </main>

  <div class="pagePadBottom" aria-hidden="true"></div>

  <a class="supportFab" href="./contact.html" data-go="./contact.html">
    <div class="s-ico">
      <svg viewBox="0 0 24 24" fill="none" stroke-width="1.8">
        <path d="M4 13v3a2 2 0 0 0 2 2h2v-6H6a2 2 0 0 0-2 2zM20 13v3a2 2 0 0 1-2 2h-2v-6h2a2 2 0 0 1 2 2z" stroke-linecap="round" stroke-linejoin="round"></path>
        <path d="M4 13a8 8 0 0 1 16 0" stroke-linecap="round"></path>
      </svg>
    </div>
    <div class="s-text" data-i18n-zh="客服支持" data-i18n-en="Support">
      客服支持
      <small data-i18n-zh="7×24 小时" data-i18n-en="24/7 online">7×24 小时</small>
    </div>
  </a>

  <!-- 保险：就算 nav.js 没加载，底部导航也存在；nav.js 会自动高亮当前页 -->
  <nav class="tabbar" aria-label="底部导航">
    <div class="tabs">
      <button class="tab" type="button" data-go="./dashboard.html">
        <div class="ico">
          <svg viewBox="0 0 24 24" fill="none" stroke-width="1.8">
            <path d="M3 10.5l9-7 9 7V20a1 1 0 0 1-1 1h-5v-7H9v7H4a1 1 0 0 1-1-1z" stroke-linecap="round" stroke-linejoin="round"></path>
          </svg>
        </div>
        <span>首页</span>
      </button>
      <button class="tab active" type="button" data-go="./tasks.html">
        <div class="ico">
          <svg viewBox="0 0 24 24" fill="none" stroke-width="1.8">
            <path d="M6 6h15l-1.5 9H7.2L6 6z" stroke-linecap="round" stroke-linejoin="round"></path>
            <circle cx="9" cy="20" r="1.5"></circle>
            <circle cx="17" cy="20" r="1.5"></circle>
            <path d="M6 6l-2-3" stroke-linecap="round"></path>
          </svg>
        </div>
        <span>任务</span>
      </button>
      <button class="tab" type="button" data-go="./records.html">
        <div class="ico">
          <svg viewBox="0 0 24 24" fill="none" stroke-width="1.8">
            <path d="M8 6h8M8 12h8M8 18h5" stroke-linecap="round"></path>
            <path d="M6 3h9l3 3v15a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1z" stroke-linecap="round" stroke-linejoin="round"></path>
          </svg>
        </div>
        <span>记录</span>
      </button>
      <button class="tab" type="button" data-go="./me.html">
        <div class="ico">
          <svg viewBox="0 0 24 24" fill="none" stroke-width="1.8">
            <path d="M20 21a8 8 0 0 0-16 0" stroke-linecap="round"></path>
            <circle cx="12" cy="8" r="4" stroke-linecap="round"></circle>
          </svg>
        </div>
        <span>我的</span>
      </button>
    </div>
  </nav>

  <script src="./js/i18n.js" defer></script>
  <script src="./js/common.js" defer></script>
  <script src="./js/tasks-center.js" defer></script>
  <script src="./js/nav.js" defer></script>
</body>
</html>
